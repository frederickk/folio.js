var Frederickk=Frederickk||{};(function(){console.log("\nFrederickkPaper.js");console.log("v.0.1a");console.log("ken.frederick@gmx.de");console.log("------------------------------------\n")})();Frederickk={FIO:{},F3D:{},FShape:{},random:function(b,a){if(a===undefined){a=b;b=0}return(b+Math.random()*(a-b))},randomInt:function(b,a){return parseInt(random(b,a))},randomBias:function(e,d,a){var f=new Array(90,9,4,2.33,1.5,1,0.66,0.43,0.25,0.11,0.01);a=Math.max(0,Math.min(a,1))*10;var b=parseInt(Math.floor(a));var g=f[b];if(a<10){g+=(f[b+1]-g)*(a-b)}return Math.pow(Math.random(),g)*(d-e)+e},clamp:function(d,b,a){return d<b?b:d>a?b:d},norm:function(b,d,a){return(b-d)/(a-d)},map:function(e,b,d,a,f){return a+(f-a)*((e-b)/(d-b))},roundDecimal:function(d,a){var b=Math.pow(10,a);return Math.round(d*b)/b},snap:function(b,a,d){if(d===undefined){d=Math.round}return a*d(b/a)},lerp:function(d,a,b){return d+(a-d)*b},degrees:function(a){return a*(180/Math.PI)},radians:function(a){return a*(Math.PI/180)},getAngle:function(a){var b=Math.atan2(a.y-0,a.x-0);return b},boolToInt:function(a){return(a)?1:0},getType:function(a){if(a instanceof paper.Tracing){return"Tracing"}else{if(a instanceof paper.TextItem){return"TextItem"}else{if(a instanceof paper.Raster){return"Raster"}else{if(a instanceof paper.PlacedSymbol){return"PlacedSymbol"}else{if(a instanceof paper.PlacedFile){return"PlacedFile"}else{if(a instanceof paper.Path){return"Path"}else{if(a instanceof paper.CompoundPath){return"CompoundPath"}else{if(a instanceof paper.Group){return"Group"}else{return"undefined"}}}}}}}}},findByName:function(a,b){var f;for(var d=0;d<a.length;d++){var e=a[d];if(e.name==b){f=e}}return f},trimToFit:function(a){var b=a.visibleRange.content;a.content=trim(b);return a},rtrim:function(b){for(var a=b.length-1;b.charAt(a)==" ";a--){b=b.substring(0,a)}return b},trim:function(a){a=a.replace(/(^\s*)|(\s*$)/gi,"");a=a.replace(/[ ]{2,}/gi," ");a=a.replace(/\n /,"\n");return a},strToBool:function(a){switch(a.toLowerCase()){case"true":case"yes":case"1":return true;case"false":case"no":case"0":case null:return false;default:return Boolean(a)}},merge:function(d,b){var a=d.concat(b);a.shuffle();return a},alphabetical:function(e,d){e=e.toLowerCase();e=e.replace(/ä/g,"a");e=e.replace(/ö/g,"o");e=e.replace(/ü/g,"u");e=e.replace(/ß/g,"s");d=d.toLowerCase();d=d.replace(/ä/g,"a");d=d.replace(/ö/g,"o");d=d.replace(/ü/g,"u");d=d.replace(/ß/g,"s");return(e==d)?0:(e>d)?1:-1}};Array.prototype.max=function(){var b=this[0];var a=this.length;for(var d=1;d<a;d++){if(this[d]>b){b=d}}return b};Array.prototype.min=function(){var d=this[0];var a=this.length;for(var b=1;b<a;b++){if(this[b]<d){d=b}}return d};Array.prototype.shuffle=function(){for(var b,a,d=this.length;d;b=parseInt(Math.random()*d),a=this[--d],this[d]=this[b],this[b]=a){}};paper.Item.prototype.snapGrid=function(a){this.position.snapGrid(a)};paper.Item.prototype.snapIso=function(a){this.position.snapIso(a)};Frederickk.FColor=function(){var a=function(b){var d=c.toString(16);return d.length==1?"0"+d:d};this.lerpCMYKColor=function(g,f,j){var i=Frederickk.lerp(g.cyan,f.cyan,j);var b=Frederickk.lerp(g.magenta,f.magenta,j);var h=Frederickk.lerp(g.yellow,f.yellow,j);var d=Frederickk.lerp(g.black,f.black,j);var e=new paper.CMYKColor(i,b,h,d);return e};this.lerpRGBColor=function(h,f,k){var j=Frederickk.lerp(h.red,f.red,k);var i=Frederickk.lerp(h.green,f.green,k);var d=Frederickk.lerp(h.blue,f.blue,k);var e=new paper.RGBColor(j,i,d);return e};this.randomRGBColor=function(){return new paper.RGBColor(Math.random(),Math.random(),Math.random())};this.randomCMYKColor=function(){return new paper.CMYKColor(Math.random(),Math.random(),Math.random(),Math.random())};this.randomGrayColor=function(){return new paper.GrayColor(Math.random())};this.random=function(){return this.randomRGBColor()};this.ColorToInt=function(d){var b;try{b=d.red;b=b<<8;b|=d.green;b=b<<8;b|=d.blue}catch(e){console.log(e);b=16777215}return b};this.IntToColor=function(h){var f=(RGB>>16)&255;var e=(RGB>>8)&255;var d=RGB&255;return new paper.RGBColor((f/255),(e/255),(d/255))};this.ColorToHex=function(e){var i,h,d;var j="";try{i=e.red*255;h=e.green*255;d=e.blue*255;j="#"+a(i)+a(h)+a(d)}catch(f){console.log(f)}return j};this.HexToColor=function(i){var e=parseInt(i,16);var h=(e>>16)&255;var f=(e>>8)&255;var d=e&255;return new paper.RGBColor(h,f,d)};this.HSVtoColor=function(i,q,n){var e,j,m;var f=new paper.RGBColor(Math.round(n),Math.round(n),Math.round(n));if(q!=0){var l=i*6;if(l==6){l=0}var k=Math.floor(l);var d=n*(1-q);var p=n*(1-q*(l-k));var o=n*(1-q*(1-(l-k)));if(k==0){var_r=n;var_g=o;var_b=d}else{if(k==1){var_r=p;var_g=n;var_b=d}else{if(k==2){var_r=d;var_g=n;var_b=o}else{if(k==3){var_r=d;var_g=p;var_b=n}else{if(k==4){var_r=o;var_g=d;var_b=n}else{var_r=n;var_g=d;var_b=p}}}}}f.red=Math.round(var_r);f.green=Math.round(var_g);f.blue=Math.round(var_b)}return f}};paper.Color.prototype.darken=function(a){this.red-=a;this.green-=a;this.blue-=a;return this};paper.Color.prototype.lighten=function(a){this.red+=a;this.green+=a;this.blue+=a;return this};Frederickk.FConversions=function(){this.ptToMm=0.352777778;this.mmToPt=2.83464567;this.ptToCm=0.0352777778;this.CmToPt=28.3464567;this.ptToIn=0.0138888889;this.inToPt=72;this.ptToPi=0.0833333333;this.piToPt=12};Frederickk.FFade=function(){var d=1000;var b=0;var f=0;var e=false;var a=false;var g=false;this.alpha=1;this.update=function(){_currentTime=new Date().getMilliseconds();this.update(_currentTime)};this.update=function(h){if(e){e=false;b=h;if(a){f=h+parseFloat((1-this.alpha)*d)}else{f=h+parseFloat(this.alpha*d)}if(f==h){if(a){a=false;this.alpha=1}else{g=false;this.alpha=0}}}if(a){this.alpha=1-parseFloat((f-h)/d);if(h>f){a=false;this.alpha=1}}else{if(g){this.alpha=parseFloat((f-h)/d);if(h>f){a=false;this.alpha=0}}}};this.fadeIn=function(){if(a){return}if(this.alpha==1){return}e=true;a=true;g=false};this.fadeOut=function(){if(g){return}if(this.alpha==0){return}e=true;g=true;a=false};this.isFadingIn=function(){return a};this.isFadingOut=function(){return g};this.stopFade=function(){e=a=g=false};this.setFadeSeconds=function(h){setFadeMillis(parseInt(h*1000))};this.setFadeMillis=function(h){d=h}};Frederickk.FPoint=paper.Point.extend({norm:function(a,b){this.x=Frederickk.norm(this.x,start.x,stop.x);this.y=Frederickk.norm(this.y,start.y,stop.y);return this},random:function(){this.x=Frederickk.random(0,view.bounds.width);this.y=Frederickk.random(0,view.bounds.height);return this},heading:function(){return -1*(Math.atan2(-this.y,this.x))},interpolateTo:function(b,a){this.x+=((b.x-this.x)*a);this.y+=((b.y-this.y)*a);return this},limit:function(a){if(this.magSq()>a*a){this.normalize();this.mult*a;return this}return this},magSq:function(){return this.x*this.x+this.y*this.y},snapGrid:function(d){var b,a;b=Math.round(this.y/d.height-this.x/d.width);a=Math.round(this.y/d.height+this.x/d.width);this.x=(a-b)/2*d.width;this.y=(a+b)/2*d.height;return this},snapIso:function(a){if(a===null){a=1}return this.snapGrid(new Size(32*a,16*a))}});Frederickk.FIO={saveFile:function(b,d){var a=new File(d);if(a.exists()){a.remove()}a.open();a.write(Json.encode(b));a.close()},openFile:function(d){var a=new File(script.file.parent,d);a.open();var b=Json.decode(a.readAll());a.close();return b},deleteFile:function(b){var a=new File(b);if(a.exists()){a.remove()}},checkFile:function(b){var a=new File(b);if(a.exists()){return true}else{return false}},saveCookie:function(d,e,f){if(f){var b=new Date();b.setTime(b.getTime()+(f*24*60*60*1000));var a="; expires="+b.toGMTString()}else{var a=""}document.cookie=d+"="+e+a+"; path=/"},openCookie:function(b){var e=b+"=";var a=document.cookie.split(";");for(var d=0;d<a.length;d++){var f=a[d];while(f.charAt(0)==" "){f=f.substring(1,f.length)}if(f.indexOf(e)==0){return f.substring(e.length,f.length)}}return null},deleteCookie:function(a){Frederickk.FIO.saveCookie(a,"",-1)}};Frederickk.FStopwatch=function(){var b;var e;var a=0;var d=0;this.toggle=function(){if(d==0){this.start()}else{this.pause()}};this.start=function(){d=1;e=new Date();e.setTime(e.getTime()-a)};this.pause=function(){d=0;b=new Date();a=b.getTime()-e.getTime()};this.reset=function(){d=0;a=0};this.set=function(f,g){a=f;(g==true)?d=0:d=1;e=new Date();e.setTime(e.getTime()-a);this.toggle()};this.get=function(){if(d==1){b=new Date();a=b.getTime()-e.getTime()}return a};this.isRunning=function(){return(d)?true:false}};Frederickk.FTime=function(){this.date;var a=function(b){if(b.length==1){b="0"+b}return b};this.hour=function(){if(this.date===undefined){this.date=new Date()}var b=String(this.date.getHours());b=a(b);return b};this.minute=function(){if(this.date===undefined){this.date=new Date()}var b=String(this.date.getMinutes());b=a(b);return b};this.second=function(){if(this.date===undefined){this.date=new Date()}var b=String(this.date.getSeconds());b=a(b);return b};this.now=function(d){var b=[];if(d===undefined){b=[true,true,true]}else{b=d}var e="";if(b[0]){e+=this.hour()}if(b[0]&&b[1]){e+=":"}if(b[1]){e+=this.minute()}if(b[1]&&b[2]){e+=":"}if(b[2]){e+=this.second()}return e};this.nowMilliseconds=function(){return this.toMillsecond(this.hour(),this.minute(),this.second())};this.add=function(b,f,d,e){return this.date+(24*b+60*f+60*d+1000*s)};this.sub=function(b,f,d,e){return this.date-(24*b+60*f+60*d+1000*s)};this.set=function(b,f,d,e){this.time=new Date();this.time.setTime((24*b+60*f+60*d+1000*s));return this.time};this.get=function(b,j){var k;if(j===undefined){k=new Array(true,true,true)}else{k=j}var i=parseInt((b/1000)%60);var f=parseInt(((b/1000)/60)%60);var h=parseInt((((b/1000)/60)/60)%24);var d,e,l;if(h<10){d="0"+h}else{d=""+h}if(f<10){e="0"+f}else{e=""+f}if(i<10){l="0"+i}else{l=""+i}var g="";if(k[0]){g+=d}if(k[0]&&k[1]){g+=":"}if(k[1]){g+=e}if(k[1]&&k[2]){g+=":"}if(k[2]){g+=l}return g};this.toMillsecond=function(i,d,g){var f,b,e;if(d===undefined&&g===undefined){f=this.toArray(i)[0];b=this.toArray(i)[1];e=this.toArray(i)[2]}else{f=i;b=d;e=g}return parseInt(3600000*f+60000*b+1000*e)};this.toArray=function(b){var d=b.split(":");return[d[0],d[1],d[2]]}};Frederickk.F3D.FPath3=function(i){this.path;this.name="";this.closed=false;this.opacity=1;this.blendMode="normal";this.visible=true;this.selected=false;this.fillColor;this.strokeColor;this.strokeWidth=1;this.strokeCap;this.strokeJoin;this.rotation=new Frederickk.F3D.FPoint3();this.translation=new Frederickk.F3D.FPoint3();var b=i;var k=[];var j=new Matrix3D();var h=0;var g=0;var f=0;var e=0;var d=0;var a=0;this.draw=function(){var n=new paper.Path();n.name=this.name;for(var l=0;l<k.length;l++){var m=k[l];n.add(new paper.Point(m.x2D(),m.y2D()))}n.opacity=this.opacity;n.blendMode=this.blendMode;n.visible=this.visible;n.selected=this.selected;n.fillColor=this.fillColor;n.strokeColor=this.strokeColor;n.strokeWidth=this.strokeWidth;n.strokeCap=this.strokeCap;n.strokeJoin=this.strokeJoin;n.closed=this.closed;this.path=n;return this.path};this.addToScene=function(l){for(var m=0;m<k.length;m++){k[m].setup(l)}};this.add=function(l){k[k.length]=l};this.translate=function(n,m,l){e=n!=undefined?n:0;d=m!=undefined?m:0;a=l!=undefined?l:0;for(var o=0;o<k.length;o++){var p=k[o];p.setX((p.x()+e));p.setY((p.y()+d));p.setZ((p.z()+a))}};this.rotateX=function(l){h=l};this.rotateY=function(l){g=l};this.rotateZ=function(l){f=l};this.get=function(){return this.path}};Frederickk.F3D.FPoint3=function(l,i,g){var m=l!=undefined?l:0;var k=i!=undefined?i:0;var h=g!=undefined?g:0;var e=null;var a=0;var d=0;var j=0;var f=0;var b=0;this.setup=function(o){e=o;var n=e.setupPoint(m,k,h);var p=n*3;var q=n*2;a=p;d=p+1;j=p+2;f=q;b=q+1};this.setX=function(n){if(e!=null){e.points3D[a]=n}m=n};this.setY=function(n){if(e!=null){e.points3D[d]=n}k=n};this.setZ=function(n){if(e!=null){e.points3D[j]=n}h=n};this.set=function(p,o,n){this.setX(p);this.setY(o);this.setZ(n)};this.get=function(){return new Frederickk.F3D.FPoint3(m,k,h)};this.x=function(){return m};this.y=function(){return k};this.z=function(){return h};this.x2D=function(){return e.points2D[f]};this.y2D=function(){return e.points2D[b]};this.getSceneIndex=function(){return sceneIndex};this.mag=function(){return Math.sqrt(m*m+k*k+h*h)};this.add=function(n){m+=n.x();k+=n.y();h+=n.z();this.set(m,k,h)};this.add=function(p,o,n){m+=p;k+=o;h+=n;this.set(m,k,h)};this.sub=function(n){m-=n.x();k-=n.y();h-=n.z();this.set(m,k,h)};this.sub=function(p,o,n){m-=p;k-=o;h-=n;this.set(m,k,h)};this.scale=function(o){m*=o;k*=o;h*=o;this.set(m,k,h)};this.mult=function(n){m*=n.x();k*=n.y();h*=n.z();this.set(m,k,h)};this.mult=function(p,o,n){m*=p;k*=o;h*=n};this.div=function(n){m/=n.x();k/=n.y();h/=n.z();this.set(m,k,h)};this.div=function(p,o,n){m/=p;k/=o;h/=n;this.set(m,k,h)};this.getDistance=function(q){var p=m-q.x();var o=k-q.y();var n=h-q.z();return Math.sqrt(p*p+o*o+n*n)};this.angleBetween=function(r,q){var o=r.x()*q.x()+r.y()*q.y()+r.z()*q.z();var p=Math.sqrt(r.x()*r.x()+r.y()*r.y()+r.z()*r.z());var n=Math.sqrt(q.x()*q.x()+q.y()*q.y()+q.z()*q.z());return Math.acos(o/(p*n))};this.normalize=function(){var n=this.mag();if(n!=0&&n!=1){this.div(n)}};this.toString=function(){return"[ "+m+", "+k+", "+h+" ]"};this.array=function(){return[m,k,h]}};Frederickk.F3D.FScene3D=function(){var q;var g;var o=new Matrix3D();var f;var m;var l=0;var j=0;var i=0;var h=1;var b=0;var e=0;var d=0;var n=0;var k=[];this.points3D=[];this.points2D=[];this.setup=function(r,u,t,v){b=t||1000;e=r||paper.view.bounds.width;d=u||paper.view.bounds.height;f=e*0.5;m=d*0.5;g=v!=undefined?v:"PERSPECTIVE";this.setMode(g);q=new paper.Group()};this.draw=function(){o.identity();if(g=="ORTHO"){p()}else{a()}o.scale(h,h,h);o.rotateX(l);o.rotateY(j);o.rotateZ(i);o.translate(0,0,b);var v=o.transformArray(this.points3D);for(var w=0;w<n;w++){var r=w*3;var u=w*2;var C=v[r];var B=v[r+1];var A=v[r+2];var t=b/(A+b);this.points2D[u]=C*t+f;this.points2D[u+1]=B*t+m}q.removeChildren();for(var w=0;w<k.length;w++){var D=k[w].draw();q.appendTop(D)}if(g=="ORTHO"){q.scale(200)}return q};this.setupPoint=function(r,v,u){var t=n;this.points2D[this.points2D.length]=0;this.points2D[this.points2D.length]=0;this.points3D[this.points3D.length]=r;this.points3D[this.points3D.length]=v;this.points3D[this.points3D.length]=u;n++;return t};var p=function(){o.makeOrtho(-m,m,m,-m,-m,m)};var a=function(){o.makePerspective(50,1,b,b*2)};this.setMode=function(r){g=r};this.addItem=function(r){k[k.length]=r;r.addToScene(this)};this.rotateX=function(r){l=r};this.rotateY=function(r){j=r};this.rotateZ=function(r){i=r};this.get=function(){return q};this.getSize=function(){return[e,d,b]};this.getMatrix=function(){return o}};var Matrix3D=function(n,m,k,i,f,e,d,b,a,q,p,o,l,j,h,g){this.n11=n||1;this.n12=m||0;this.n13=k||0;this.n14=i||0;this.n21=f||0;this.n22=e||1;this.n23=d||0;this.n24=b||0;this.n31=a||0;this.n32=q||0;this.n33=p||1;this.n34=o||0;this.n41=l||0;this.n42=j||0;this.n43=h||0;this.n44=g||1;this.clone=function(){return new Matrix3D(this.n11,this.n12,this.n13,this.n14,this.n21,this.n22,this.n23,this.n24,this.n31,this.n32,this.n33,this.n34,this.n41,this.n42,this.n43,this.n44)};this.concat=function(r){var t={};t.n11=this.n11*r.n11+this.n12*r.n21+this.n13*r.n31+this.n14*r.n41;t.n12=this.n11*r.n12+this.n12*r.n22+this.n13*r.n32+this.n14*r.n42;t.n13=this.n11*r.n13+this.n12*r.n23+this.n13*r.n33+this.n14*r.n43;t.n14=this.n11*r.n14+this.n12*r.n24+this.n13*r.n34+this.n14*r.n44;t.n21=this.n21*r.n11+this.n22*r.n21+this.n23*r.n31+this.n24*r.n41;t.n22=this.n21*r.n12+this.n22*r.n22+this.n23*r.n32+this.n24*r.n42;t.n23=this.n21*r.n13+this.n22*r.n23+this.n23*r.n33+this.n24*r.n43;t.n24=this.n21*r.n14+this.n22*r.n24+this.n23*r.n34+this.n24*r.n44;t.n31=this.n31*r.n11+this.n32*r.n21+this.n33*r.n31+this.n34*r.n41;t.n32=this.n31*r.n12+this.n32*r.n22+this.n33*r.n32+this.n34*r.n42;t.n33=this.n31*r.n13+this.n32*r.n23+this.n33*r.n33+this.n34*r.n43;t.n34=this.n31*r.n14+this.n32*r.n24+this.n33*r.n34+this.n34*r.n44;t.n41=this.n41*r.n11+this.n42*r.n21+this.n43*r.n31+this.n44*r.n41;t.n42=this.n41*r.n12+this.n42*r.n22+this.n43*r.n32+this.n44*r.n42;t.n43=this.n41*r.n13+this.n42*r.n23+this.n43*r.n33+this.n44*r.n43;t.n44=this.n41*r.n14+this.n42*r.n24+this.n43*r.n34+this.n44*r.n44;this.initialize(t)};this.initialize=function(r){for(var t in r){this[t]=r[t]}};this.createBox=function(A,y,w,u,t,r,z,x,v){this.identity();if(u!=0){this.rotateX(u)}if(t!=0){this.rotateY(t)}if(r!=0){this.rotateZ(r)}if(A!=1||y!=1||w!=1){this.scale(A,y,w)}if(z!=0||x!=0||v!=0){this.translate(z,x,v)}};this.identity=function(){this.initialize({n11:1,n12:0,n13:0,n14:0,n21:0,n22:1,n23:0,n24:0,n31:0,n32:0,n33:1,n34:0,n41:0,n42:0,n43:0,n44:1})};this.rotateX=function(u){var r=Math.sin(u);var t=Math.cos(u);this.concat(new Matrix3D(1,0,0,0,0,t,-r,0,0,r,t,0,0,0,0,1))};this.rotateY=function(u){var r=Math.sin(u);var t=Math.cos(u);this.concat(new Matrix3D(t,0,r,0,0,1,0,0,-r,0,t,0,0,0,0,1))};this.rotateZ=function(u){var r=Math.sin(u);var t=Math.cos(u);this.concat(new Matrix3D(t,-r,0,0,r,t,0,0,0,0,1,0,0,0,0,1))};this.setRotateAxis=function(r,u){var E=Math.cos(u);var B=Math.sin(u);var F=1-E;var D=r.x();var C=r.y();var A=r.z();var w=F*D;var v=F*C;this.concat(w*D+E,w*C-B*A,w*A+B*C,0,w*C+B*A,v*C+E,v*A-B*D,0,w*A-B*C,v*A+B*D,F*A*A+E,0,0,0,0,1)};this.scale=function(u,t,r){this.concat(new Matrix3D(u,0,0,0,0,t,0,0,0,0,r,0,0,0,0,1))};this.translate=function(u,t,r){this.n41+=u;this.n42+=t;this.n43+=r};this.transformPoint=function(r){return new Vertex3D(this.n11*r.x+this.n21*r.y+this.n31*r.z+this.n41,this.n12*r.x+this.n22*r.y+this.n32*r.z+this.n42,this.n13*r.x+this.n23*r.y+this.n33*r.z+this.n43)};this.transformArray=function(t){var w=[];var A=t.length/3;for(var v=0;v<A;v++){var u=v*3;var r=t[u];var C=t[u+1];var B=t[u+2];w[u]=this.n11*r+this.n21*C+this.n31*B+this.n41;w[u+1]=this.n12*r+this.n22*C+this.n32*B+this.n42;w[u+2]=this.n13*r+this.n23*C+this.n33*B+this.n43}return w};this.makeFrustum=function(t,F,r,C,v,u){var G={};var E=2*v/(F-t);var B=2*v/(C-r);var D=(F+t)/(F-t);var A=(C+r)/(C-r);var z=-(u+v)/(u-v);var w=-2*u*v/(u-v);G.n11=E;G.n12=0;G.n13=D;G.n14=0;G.n21=0;G.n22=B;G.n23=A;G.n24=0;G.n31=0;G.n32=0;G.n33=z;G.n34=w;G.n41=0;G.n42=0;G.n43=-1;G.n44=0;this.concat(G)};this.makePerspective=function(w,u,y,t){var r=y*Math.tan(w*Math.PI/360);var x=-r;var z=x*u;var v=r*u;this.makeFrustum(z,v,x,r,y,t)};this.makeOrtho=function(u,H,E,r,B,A){var I={};var G=H-u;var v=E-r;var t=A-B;var F=(H+u)/G;var D=(E+r)/v;var C=(A+B)/t;I.n11=2/G;I.n12=0;I.n13=0;I.n14=-F;I.n21=0;I.n22=2/v;I.n23=0;I.n24=-D;I.n31=0;I.n32=0;I.n33=-2/t;I.n34=-C;I.n41=0;I.n42=0;I.n43=0;I.n44=1;this.concat(I)};this.toString=function(){return this.n11+","+this.n12+","+this.n13+","+this.n14+","+this.n21+","+this.n22+","+this.n23+","+this.n24+","+this.n31+","+this.n32+","+this.n33+","+this.n34+","+this.n41+","+this.n42+","+this.n43+","+this.n44}};Frederickk.FShape.FBox=function(h){this.sides=new Array(6);this.name="";this.visible=true;this.selected=false;this.strokeCap;this.strokeJoin;var g=h;this.faceFRONT=[new Frederickk.F3D.FPoint3(-0.5,-0.5,-0.5),new Frederickk.F3D.FPoint3(0.5,-0.5,-0.5),new Frederickk.F3D.FPoint3(0.5,0.5,-0.5),new Frederickk.F3D.FPoint3(-0.5,0.5,-0.5)];this.faceTOP=[new Frederickk.F3D.FPoint3(-0.5,-0.5,0.5),new Frederickk.F3D.FPoint3(0.5,-0.5,0.5),new Frederickk.F3D.FPoint3(0.5,-0.5,-0.5),new Frederickk.F3D.FPoint3(-0.5,-0.5,-0.5)];this.faceBOTTOM=[new Frederickk.F3D.FPoint3(-0.5,0.5,0.5),new Frederickk.F3D.FPoint3(0.5,0.5,0.5),new Frederickk.F3D.FPoint3(0.5,0.5,-0.5),new Frederickk.F3D.FPoint3(-0.5,0.5,-0.5)];this.faceLEFT=[new Frederickk.F3D.FPoint3(-0.5,-0.5,-0.5),new Frederickk.F3D.FPoint3(-0.5,-0.5,0.5),new Frederickk.F3D.FPoint3(-0.5,0.5,0.5),new Frederickk.F3D.FPoint3(-0.5,0.5,-0.5)];this.faceRIGHT=[new Frederickk.F3D.FPoint3(0.5,-0.5,-0.5),new Frederickk.F3D.FPoint3(0.5,-0.5,0.5),new Frederickk.F3D.FPoint3(0.5,0.5,0.5),new Frederickk.F3D.FPoint3(0.5,0.5,-0.5)];this.faceBACK=[new Frederickk.F3D.FPoint3(-0.5,-0.5,0.5),new Frederickk.F3D.FPoint3(0.5,-0.5,0.5),new Frederickk.F3D.FPoint3(0.5,0.5,0.5),new Frederickk.F3D.FPoint3(-0.5,0.5,0.5)];var b=[["front",this.faceFRONT],["top",this.faceTOP],["bottom",this.faceBOTTOM],["left",this.faceLEFT],["right",this.faceRIGHT],["back",this.faceBACK]];var i=[1,1,1,1,1,1];var f=["normal","normal","normal","normal","normal","normal"];var e=[new paper.RGBColor(1,1,0,0.8),new paper.RGBColor(1,0,1,0.8),new paper.RGBColor(0,0,1,0.8),new paper.RGBColor(1,0,0,0.8),new paper.RGBColor(0,1,1,0.8),new paper.RGBColor(0,1,0,0.8)];var a=[new paper.RGBColor(1,1,0,0.8),new paper.RGBColor(1,0,1,0.8),new paper.RGBColor(0,0,1,0.8),new paper.RGBColor(1,0,0,0.8),new paper.RGBColor(0,1,1,0.8),new paper.RGBColor(0,1,0,0.8)];var j=[1,1,1,1,1,1];var d=new Frederickk.F3D.FPoint3(10,10,10);this.init=function(o,l,k){for(var p=0;p<b.length;p++){this.sides[p]=new f3d.FPath3();this.sides[p].name=b[p][0];var n=b[p][1];for(var m=0;m<n.length;m++){this.sides[p].add(new f3d.FPoint3(n[m].x()*d.x(),n[m].y()*d.y(),n[m].z()*d.z()))}this.sides[p].opacity=i[p];this.sides[p].blendMode=f[p];this.sides[p].visible=this.visible;this.sides[p].selected=this.selected;this.sides[p].fillColor=e[p];this.sides[p].strokeColor=a[p];this.sides[p].strokeWidth=j[p];this.sides[p].strokeCap=this.strokeCap;this.sides[p].strokeJoin=this.strokeJoin;this.sides[p].closed=true;this.sides[p].translate(o,l,k);g.addItem(this.sides[p])}};this.setWHD=function(k,m,l){d.set(k,m,l)};this.setVisible=function(k){this.visible=k};this.setSelected=function(k){this.selected=k};this.setOpacity=function(k,l){i[k]=l};this.setOpacity=function(k){i=k};this.setFillColor=function(l,k){e[l]=k};this.setFillColor=function(k){e=k};this.setStrokeColor=function(l,k){a[l]=k};this.setStrokeColor=function(k){a=k};this.setStrokeWidth=function(l,k){j[l]=k};this.setStrokeWidth=function(k){j=k};this.setStrokeCap=function(k){this.strokeCap=k};this.setStrokeJoin=function(k){this.strokeJoin=k};this.get=function(){return this.sides};this.get=function(k){return this.sides[k]};this.getWHD=function(){return d}};Frederickk.FShape.FBubble=paper.Path.extend({});Frederickk.FShape.FSphere=paper.Path.extend({});Frederickk.FControl=function(a){this.divId=a;this.addCheck=function(d,e){var b=document.createElement("input");b.setAttribute("type","chackbox");b.setAttribute("value",e);b.setAttribute("name",d);var f=document.createElement("div");f.appendChild(b);var g=document.getElementById(this.divId);g.appendChild(f)};this.addInput=function(d,e){var b=document.createElement("input");b.setAttribute("type","text");b.setAttribute("className","txt");b.setAttribute("value",e);b.setAttribute("name",d);var f=document.createElement("div");f.appendChild(b);var g=document.getElementById(this.divId);g.appendChild(f)}};