var Frederickk=Frederickk||{};(function(){console.log("\nFrederickkPaper.js");console.log("ken.frederick@gmx.de");console.log("------------------------------------\n")})();Frederickk={FIO:{},F3D:{},random:function(b,a){if(a===undefined){a=b;b=0}return(b+Math.random()*(a-b))},randomInt:function(b,a){return parseInt(random(b,a))},randomBias:function(e,d,a){var f=new Array(90,9,4,2.33,1.5,1,0.66,0.43,0.25,0.11,0.01);a=Math.max(0,Math.min(a,1))*10;var b=parseInt(Math.floor(a));var g=f[b];if(a<10){g+=(f[b+1]-g)*(a-b)}return Math.pow(Math.random(),g)*(d-e)+e},clamp:function(d,b,a){return d<b?b:d>a?b:d},norm:function(b,d,a){return(b-d)/(a-d)},map:function(e,b,d,a,f){return a+(f-a)*((e-b)/(d-b))},roundDecimal:function(d,a){var b=Math.pow(10,a);return Math.round(d*b)/b},snap:function(b,a,d){if(d===undefined){d=Math.round}return a*d(b/a)},lerp:function(d,a,b){return d+(a-d)*b},degrees:function(a){return a*(180/Math.PI)},radians:function(a){return a*(Math.PI/180)},getAngle:function(a){var b=Math.atan2(a.y-0,a.x-0);return b},boolToInt:function(a){return(a)?1:0},getType:function(a){if(a instanceof paper.Tracing){return"Tracing"}else{if(a instanceof paper.TextItem){return"TextItem"}else{if(a instanceof paper.Raster){return"Raster"}else{if(a instanceof paper.PlacedSymbol){return"PlacedSymbol"}else{if(a instanceof paper.PlacedFile){return"PlacedFile"}else{if(a instanceof paper.Path){return"Path"}else{if(a instanceof paper.CompoundPath){return"CompoundPath"}else{if(a instanceof paper.Group){return"Group"}else{return"undefined"}}}}}}}}},trimToFit:function(a){var b=a.visibleRange.content;a.content=trim(b);return a},rtrim:function(b){for(var a=b.length-1;b.charAt(a)==" ";a--){b=b.substring(0,a)}return b},trim:function(a){a=a.replace(/(^\s*)|(\s*$)/gi,"");a=a.replace(/[ ]{2,}/gi," ");a=a.replace(/\n /,"\n");return a},strToBool:function(a){switch(a.toLowerCase()){case"true":case"yes":case"1":return true;case"false":case"no":case"0":case null:return false;default:return Boolean(a)}},merge:function(d,b){var a=d.concat(b);a.shuffle();return a},alphabetical:function(e,d){e=e.toLowerCase();e=e.replace(/ä/g,"a");e=e.replace(/ö/g,"o");e=e.replace(/ü/g,"u");e=e.replace(/ß/g,"s");d=d.toLowerCase();d=d.replace(/ä/g,"a");d=d.replace(/ö/g,"o");d=d.replace(/ü/g,"u");d=d.replace(/ß/g,"s");return(e==d)?0:(e>d)?1:-1}};Array.prototype.max=function(){var b=this[0];var a=this.length;for(var d=1;d<a;d++){if(this[d]>b){b=d}}return b};Array.prototype.min=function(){var d=this[0];var a=this.length;for(var b=1;b<a;b++){if(this[b]<d){d=b}}return d};Array.prototype.shuffle=function(){for(var b,a,d=this.length;d;b=parseInt(Math.random()*d),a=this[--d],this[d]=this[b],this[b]=a){}};paper.Item.prototype.snapGrid=function(a){this.position.snapGrid(a)};paper.Item.prototype.snapIso=function(a){this.position.snapIso(a)};Frederickk.FColor=function(){var a=function(b){var d=c.toString(16);return d.length==1?"0"+d:d};this.lerpCMYKColor=function(g,f,j){var i=Frederickk.lerp(g.cyan,f.cyan,j);var b=Frederickk.lerp(g.magenta,f.magenta,j);var h=Frederickk.lerp(g.yellow,f.yellow,j);var d=Frederickk.lerp(g.black,f.black,j);var e=new paper.CMYKColor(i,b,h,d);return e};this.lerpRGBColor=function(h,f,k){var j=Frederickk.lerp(h.red,f.red,k);var i=Frederickk.lerp(h.green,f.green,k);var d=Frederickk.lerp(h.blue,f.blue,k);var e=new paper.RGBColor(j,i,d);return e};this.randomRGBColor=function(){return new paper.RGBColor(Math.random(),Math.random(),Math.random())};this.randomCMYKColor=function(){return new paper.CMYKColor(Math.random(),Math.random(),Math.random(),Math.random())};this.randomGrayColor=function(){return new paper.GrayColor(Math.random())};this.random=function(){return this.randomRGBColor()};this.ColorToInt=function(d){var b;try{b=d.red;b=b<<8;b|=d.green;b=b<<8;b|=d.blue}catch(e){console.log(e);b=16777215}return b};this.IntToColor=function(h){var f=(RGB>>16)&255;var e=(RGB>>8)&255;var d=RGB&255;return new paper.RGBColor((f/255),(e/255),(d/255))};this.ColorToHex=function(e){var i,h,d;var j="";try{i=e.red*255;h=e.green*255;d=e.blue*255;j="#"+a(i)+a(h)+a(d)}catch(f){console.log(f)}return j};this.HexToColor=function(i){var e=parseInt(i,16);var h=(e>>16)&255;var f=(e>>8)&255;var d=e&255;return new paper.RGBColor(h,f,d)};this.HSVtoColor=function(i,q,n){var e,j,m;var f=new paper.RGBColor(Math.round(n),Math.round(n),Math.round(n));if(q!=0){var l=i*6;if(l==6){l=0}var k=Math.floor(l);var d=n*(1-q);var p=n*(1-q*(l-k));var o=n*(1-q*(1-(l-k)));if(k==0){var_r=n;var_g=o;var_b=d}else{if(k==1){var_r=p;var_g=n;var_b=d}else{if(k==2){var_r=d;var_g=n;var_b=o}else{if(k==3){var_r=d;var_g=p;var_b=n}else{if(k==4){var_r=o;var_g=d;var_b=n}else{var_r=n;var_g=d;var_b=p}}}}}f.red=Math.round(var_r);f.green=Math.round(var_g);f.blue=Math.round(var_b)}return f}};paper.Color.prototype.darken=function(a){this.red-=a;this.green-=a;this.blue-=a;return this};paper.Color.prototype.lighten=function(a){this.red+=a;this.green+=a;this.blue+=a;return this};Frederickk.FConversions=function(){this.ptToMm=0.352777778;this.mmToPt=2.83464567;this.ptToCm=0.0352777778;this.CmToPt=28.3464567;this.ptToIn=0.0138888889;this.inToPt=72;this.ptToPi=0.0833333333;this.piToPt=12};Frederickk.FFade=function(){var d=1000;var b=0;var f=0;var e=false;var a=false;var g=false;this.alpha=1;this.update=function(){_currentTime=new Date().getMilliseconds();this.update(_currentTime)};this.update=function(h){if(e){e=false;b=h;if(a){f=h+parseFloat((1-this.alpha)*d)}else{f=h+parseFloat(this.alpha*d)}if(f==h){if(a){a=false;this.alpha=1}else{g=false;this.alpha=0}}}if(a){this.alpha=1-parseFloat((f-h)/d);if(h>f){a=false;this.alpha=1}}else{if(g){this.alpha=parseFloat((f-h)/d);if(h>f){a=false;this.alpha=0}}}};this.fadeIn=function(){if(a){return}if(this.alpha==1){return}e=true;a=true;g=false};this.fadeOut=function(){if(g){return}if(this.alpha==0){return}e=true;g=true;a=false};this.isFadingIn=function(){return a};this.isFadingOut=function(){return g};this.stopFade=function(){e=a=g=false};this.setFadeSeconds=function(h){setFadeMillis(parseInt(h*1000))};this.setFadeMillis=function(h){d=h}};Frederickk.FPoint=paper.Point.extend({norm:function(a,b){this.x=Frederickk.norm(this.x,start.x,stop.x);this.y=Frederickk.norm(this.y,start.y,stop.y);return this},random:function(){this.x=Frederickk.random(0,view.bounds.width);this.y=Frederickk.random(0,view.bounds.height);return this},heading:function(){return -1*(Math.atan2(-this.y,this.x))},interpolateTo:function(b,a){this.x+=((b.x-this.x)*a);this.y+=((b.y-this.y)*a);return this},limit:function(a){if(this.magSq()>a*a){this.normalize();this.mult*a;return this}return this},magSq:function(){return this.x*this.x+this.y*this.y},snapGrid:function(d){var b,a;b=Math.round(this.y/d.height-this.x/d.width);a=Math.round(this.y/d.height+this.x/d.width);this.x=(a-b)/2*d.width;this.y=(a+b)/2*d.height;return this},snapIso:function(a){if(a===null){a=1}return this.snapGrid(new Size(32*a,16*a))}});Frederickk.FIO={saveFile:function(b,d){var a=new File(d);if(a.exists()){a.remove()}a.open();a.write(Json.encode(b));a.close()},openFile:function(d){var a=new File(script.file.parent,d);a.open();var b=Json.decode(a.readAll());a.close();return b},deleteFile:function(b){var a=new File(b);if(a.exists()){a.remove()}},checkFile:function(b){var a=new File(b);if(a.exists()){return true}else{return false}},saveCookie:function(d,e,f){if(f){var b=new Date();b.setTime(b.getTime()+(f*24*60*60*1000));var a="; expires="+b.toGMTString()}else{var a=""}document.cookie=d+"="+e+a+"; path=/"},openCookie:function(b){var e=b+"=";var a=document.cookie.split(";");for(var d=0;d<a.length;d++){var f=a[d];while(f.charAt(0)==" "){f=f.substring(1,f.length)}if(f.indexOf(e)==0){return f.substring(e.length,f.length)}}return null},deleteCookie:function(a){Frederickk.FIO.saveCookie(a,"",-1)}};Frederickk.FStopwatch=function(){var b;var e;var a=0;var d=0;this.toggle=function(){if(d==0){this.start()}else{this.pause()}};this.start=function(){d=1;e=new Date();e.setTime(e.getTime()-a)};this.pause=function(){d=0;b=new Date();a=b.getTime()-e.getTime()};this.reset=function(){d=0;a=0};this.set=function(f,g){a=f;(g)?d=0:d=1;e=new Date();e.setTime(e.getTime()-a);this.toggle()};this.get=function(){if(d==1){b=new Date();a=b.getTime()-e.getTime()}return a};this.isRunning=function(){return(d)?true:false}};Frederickk.FTime=function(){this.date;var a=function(b){if(b.length==1){b="0"+b}return b};this.hour=function(){if(this.date===undefined){this.date=new Date()}var b=String(this.date.getHours());b=a(b);return b};this.minute=function(){if(this.date===undefined){this.date=new Date()}var b=String(this.date.getMinutes());b=a(b);return b};this.second=function(){if(this.date===undefined){this.date=new Date()}var b=String(this.date.getSeconds());b=a(b);return b};this.now=function(d){var b=[];if(d===undefined){b=[true,true,true]}else{b=d}var e="";if(b[0]){e+=this.hour()}if(b[0]&&b[1]){e+=":"}if(b[1]){e+=this.minute()}if(b[1]&&b[2]){e+=":"}if(b[2]){e+=this.second()}return e};this.nowMilliseconds=function(){return this.toMillsecond(this.hour(),this.minute(),this.second())};this.add=function(b,f,d,e){return this.date+(24*b+60*f+60*d+1000*s)};this.sub=function(b,f,d,e){return this.date-(24*b+60*f+60*d+1000*s)};this.set=function(b,f,d,e){this.time=new Date();this.time.setTime((24*b+60*f+60*d+1000*s));return this.time};this.get=function(b,j){var k;if(j===undefined){k=new Array(true,true,true)}else{k=j}var i=parseInt((b/1000)%60);var f=parseInt(((b/1000)/60)%60);var h=parseInt((((b/1000)/60)/60)%24);var d,e,l;if(h<10){d="0"+h}else{d=""+h}if(f<10){e="0"+f}else{e=""+f}if(i<10){l="0"+i}else{l=""+i}var g="";if(k[0]){g+=d}if(k[0]&&k[1]){g+=":"}if(k[1]){g+=e}if(k[1]&&k[2]){g+=":"}if(k[2]){g+=l}return g};this.toMillsecond=function(i,d,g){var f,b,e;if(d===undefined&&g===undefined){f=this.toArray(i)[0];b=this.toArray(i)[1];e=this.toArray(i)[2]}else{f=i;b=d;e=g}console.log("h\t"+f);console.log("m\t"+b);console.log("s\t"+e);return parseInt(3600000*f+60000*b+1000*e)};this.toArray=function(b){var d=b.split(":");return[d[0],d[1],d[2]]}};Frederickk.F3D.FPath3=function(){var a=[];this.draw=function(){var d=new Path();for(var b=0;b<a.length;b++){d.add(new Point(a[b].x2D,a[b].y2D))}d.closed=true;return d};this.addToScene=function(d){for(var b=0;b<a.length;b++){a[b].setup(d)}};this.add=function(b){a[a.length]=b}};Frederickk.F3D.FPoint3=function(j,h,g){this.x=j!=undefined?j:0;this.y=h!=undefined?h:0;this.z=g!=undefined?g:0;var e=null;var a=0;var d=0;var i=0;var f=0;var b=0;this.setup=function(n){n=n;var k=n.setupPoint(this.x,this.y,this.z);var l=k*3;var m=k*2;a=l;d=l+1;i=l+2;f=m;b=m+1};this.setX=function(k){if(e!=null){e.points3D[a]=k}x=k};this.setY=function(k){if(e!=null){e.points3D[d]=k}y=k};this.setZ=function(k){if(e!=null){e.points3D[i]=k}z=k};this.getSceneIndex=function(){return mySceneIndex};this.x2D=function(){return e.points2D[f]};this.y2D=function(){return e.points2D[b]}};Frederickk.F3D.FScene3D=function(){var n;var l=new Matrix3D();var j=0;var h=0;var g=0;var e=1;var b=0;var f=0;var d=0;var m=[];var a=[];var k=0;var i=[];this.setup=function(o,q,p){b=p||1000;f=o||paper.view.bounds.width;d=q||paper.view.bounds.height;n=new paper.Group()};this.draw=function(){var t=f*0.5;var v=d*0.5;l.identity();l.scale(p,p,p);l.rotateX(j);l.rotateY(h);l.rotateZ(g);l.translate(0,0,1000);var r=l.transformArray(m);for(var u=0;u<k;u++){var o=u*3;var q=u*2;var B=r[o];var A=r[o+1];var w=r[o+2];var p=b/(w+b);a[q]=B*p+t;a[q+1]=A*p+v}for(var u=0;u<i.length;u++){var C=i[u].draw();C.strokeColor=new paper.RGBColor(1,0,1);console.log("scene.draw()");console.log(C);n.appendTop(C);console.log(u)}return n};this.setupPoint=function(o,r,q){var p=k;a[a.length]=0;a[a.length]=0;m[m.length]=o;m[m.length]=r;m[m.length]=q;k++;return p};this.addItem=function(o){i[i.length]=o;o.addToScene(this)};this.rotateX=function(o){j=o};this.rotateY=function(o){h=o};this.rotateZ=function(o){g=o};this.get=function(){return n}};var Matrix3D=function(n,m,k,i,f,e,d,b,a,q,p,o,l,j,h,g){this.n11=n||1;this.n12=m||0;this.n13=k||0;this.n14=i||0;this.n21=f||0;this.n22=e||1;this.n23=d||0;this.n24=b||0;this.n31=a||0;this.n32=q||0;this.n33=p||1;this.n34=o||0;this.n41=l||0;this.n42=j||0;this.n43=h||0;this.n44=g||1;this.clone=function(){return new Matrix3D(this.n11,this.n12,this.n13,this.n14,this.n21,this.n22,this.n23,this.n24,this.n31,this.n32,this.n33,this.n34,this.n41,this.n42,this.n43,this.n44)};this.concat=function(r){var t={};t.n11=this.n11*r.n11+this.n12*r.n21+this.n13*r.n31+this.n14*r.n41;t.n12=this.n11*r.n12+this.n12*r.n22+this.n13*r.n32+this.n14*r.n42;t.n13=this.n11*r.n13+this.n12*r.n23+this.n13*r.n33+this.n14*r.n43;t.n14=this.n11*r.n14+this.n12*r.n24+this.n13*r.n34+this.n14*r.n44;t.n21=this.n21*r.n11+this.n22*r.n21+this.n23*r.n31+this.n24*r.n41;t.n22=this.n21*r.n12+this.n22*r.n22+this.n23*r.n32+this.n24*r.n42;t.n23=this.n21*r.n13+this.n22*r.n23+this.n23*r.n33+this.n24*r.n43;t.n24=this.n21*r.n14+this.n22*r.n24+this.n23*r.n34+this.n24*r.n44;t.n31=this.n31*r.n11+this.n32*r.n21+this.n33*r.n31+this.n34*r.n41;t.n32=this.n31*r.n12+this.n32*r.n22+this.n33*r.n32+this.n34*r.n42;t.n33=this.n31*r.n13+this.n32*r.n23+this.n33*r.n33+this.n34*r.n43;t.n34=this.n31*r.n14+this.n32*r.n24+this.n33*r.n34+this.n34*r.n44;t.n41=this.n41*r.n11+this.n42*r.n21+this.n43*r.n31+this.n44*r.n41;t.n42=this.n41*r.n12+this.n42*r.n22+this.n43*r.n32+this.n44*r.n42;t.n43=this.n41*r.n13+this.n42*r.n23+this.n43*r.n33+this.n44*r.n43;t.n44=this.n41*r.n14+this.n42*r.n24+this.n43*r.n34+this.n44*r.n44;this.initialize(t)};this.initialize=function(r){for(var t in r){this[t]=r[t]}};this.createBox=function(D,B,w,u,t,r,C,A,v){this.identity();if(u!=0){this.rotateX(u)}if(t!=0){this.rotateY(t)}if(r!=0){this.rotateZ(r)}if(D!=1||B!=1||w!=1){this.scale(D,B,w)}if(C!=0||A!=0||v!=0){this.translate(C,A,v)}};this.identity=function(){this.initialize({n11:1,n12:0,n13:0,n14:0,n21:0,n22:1,n23:0,n24:0,n31:0,n32:0,n33:1,n34:0,n41:0,n42:0,n43:0,n44:1})};this.rotateX=function(u){var r=Math.sin(u);var t=Math.cos(u);this.concat(new Matrix3D(1,0,0,0,0,t,-r,0,0,r,t,0,0,0,0,1))};this.rotateY=function(u){var r=Math.sin(u);var t=Math.cos(u);this.concat(new Matrix3D(t,0,-r,0,0,1,0,0,r,0,t,0,0,0,0,1))};this.rotateZ=function(u){var r=Math.sin(u);var t=Math.cos(u);this.concat(new Matrix3D(t,r,0,0,-r,t,0,0,0,0,1,0,0,0,0,1))};this.scale=function(u,t,r){this.concat(new Matrix3D(u,0,0,0,0,t,0,0,0,0,r,0,0,0,0,1))};this.translate=function(u,t,r){this.n41+=u;this.n42+=t;this.n43+=r};this.transformPoint=function(r){return new Vertex3D(this.n11*r.x+this.n21*r.y+this.n31*r.z+this.n41,this.n12*r.x+this.n22*r.y+this.n32*r.z+this.n42,this.n13*r.x+this.n23*r.y+this.n33*r.z+this.n43)};this.transformArray=function(t){var w=[];var A=t.length/3;for(var v=0;v<A;v++){var u=v*3;var r=t[u];var C=t[u+1];var B=t[u+2];w[u]=this.n11*r+this.n21*C+this.n31*B+this.n41;w[u+1]=this.n12*r+this.n22*C+this.n32*B+this.n42;w[u+2]=this.n13*r+this.n23*C+this.n33*B+this.n43}return w};this.toString=function(){return this.n11+","+this.n12+","+this.n13+","+this.n14+","+this.n21+","+this.n22+","+this.n23+","+this.n24+","+this.n31+","+this.n32+","+this.n33+","+this.n34+","+this.n41+","+this.n42+","+this.n43+","+this.n44}};Frederickk.FControl=function(a){this.divId=a;this.addCheck=function(d,e){var b=document.createElement("input");b.setAttribute("type","chackbox");b.setAttribute("value",e);b.setAttribute("name",d);var f=document.createElement("div");f.appendChild(b);var g=document.getElementById(this.divId);g.appendChild(f)};this.addInput=function(d,e){var b=document.createElement("input");b.setAttribute("type","text");b.setAttribute("className","txt");b.setAttribute("value",e);b.setAttribute("name",d);var f=document.createElement("div");f.appendChild(b);var g=document.getElementById(this.divId);g.appendChild(f)}};